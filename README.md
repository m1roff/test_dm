Тестовое задание от DM
======================

ОПИСАНИЕ
--------
* Таблицы БД находятся в директории `migrations` в корне проекта
* Скрипты для запуска из CRON и дополнительные скрипты командной строки в директории `commands` в корне проекта
* Основной контроллер обработки запроса номера телефона `TestController` в директории `controllers`  в корне проекта



Install
-------
* клонировать проект
* в консоли из корневой директории проекта запустить команду 
```bash
./yii migrate
```


TODO
----
* Проверка на новый файл производиться с помощью md5_file, но для ускорения процесса, можно сделать обертку для cmp.
* "Транзакционный" метод записи информации о файле в БД


Использование
-------------

### Запрос/Проверка номера телефона

URL для запроса:

~~~
http://DOMAIN/test?phone=7xxxxxxxxxx
~~~

#### Пример:

Запрос
~~~
curl http://test-docmore.dev/test?phone=79670000000
~~~

Ответ на запрос
```json
{
    "phone":"79670000000",
    "status":true,
    "data":{
        "timezone":"GMT+03:00",
        "localtime":"22:56",
        "localdate":"2016-05-19",
        "moscowdatetime":"19.05.2016  22:56:59 GMT+03:00",
        "userdatetime":"19.05.2016  22:56:59 GMT+03:00",
        "utcdatetime":"19.05.2016  19:56:59 GMT+00:00",
        "region":"г. Москва и Московская область",
        "city":null,
        "operator":"ОАО \"Вымпел-Коммуникации\""
    }
}
```


### Обновление данных кодов телефона из реестра

```bash
$ ./yii phones/get-files
```

### Обновление GMT указателя
```bash
./yii gmt-update
```


